# –≠—Ç–∞–ø 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Frontend - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

## –°—Ç–∞—Ç—É—Å: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

–§–∞–π–ª `app/page.js` —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª—ë–Ω —Å–æ–≥–ª–∞—Å–Ω–æ –ø–ª–∞–Ω—É. –í—Å–µ 5 —à–∞–≥–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã, –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ç–∞–π–º–∞—É—Ç—ã –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑–∞–≤–∏—Å–∞–Ω–∏–π.

---

## –®–∞–≥ 3.1: –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–π —Ñ—É–Ω–∫—Ü–∏–∏ handleAction ‚úÖ

**–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ:**
- ‚úÖ –¢–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞ —Ñ—É–Ω–∫—Ü–∏–∏ `handleAction` –∏–∑—É—á–µ–Ω–∞
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Ç–æ—á–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
  - –£–¥–∞–ª–µ–Ω–∏–µ –≤—ã–∑–æ–≤–∞ `/api/translate` (—Å—Ç—Ä–æ–∫–∏ 36-48 –≤ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏)
  - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤—ã–∑–æ–≤–∞ `/api/ai-action` –ø–æ—Å–ª–µ –ø–∞—Ä—Å–∏–Ω–≥–∞
  - –ü–µ—Ä–µ–¥–∞—á–∞ `actionType` –≤ –Ω–æ–≤—ã–π API

**–¢–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞ (–¥–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π):**
1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è URL
2. –ü–∞—Ä—Å–∏–Ω–≥ —Å—Ç–∞—Ç—å–∏ —á–µ—Ä–µ–∑ `/api/parse`
3. –ü–µ—Ä–µ–≤–æ–¥ —á–µ—Ä–µ–∑ `/api/translate` ‚ùå (—É–¥–∞–ª–µ–Ω–æ)
4. –í—ã–≤–æ–¥ –ø–µ—Ä–µ–≤–æ–¥–∞ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**–ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞:**
1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è URL
2. –ü–∞—Ä—Å–∏–Ω–≥ —Å—Ç–∞—Ç—å–∏ —á–µ—Ä–µ–∑ `/api/parse` (—Å —Ç–∞–π–º–∞—É—Ç–æ–º 30 —Å–µ–∫)
3. –û–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ `/api/ai-action` —Å –ø–µ—Ä–µ–¥–∞—á–µ–π `actionType` (—Å —Ç–∞–π–º–∞—É—Ç–æ–º 90 —Å–µ–∫)
4. –í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –æ—Ç AI

---

## –®–∞–≥ 3.2: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Ñ—É–Ω–∫—Ü–∏–∏ handleAction ‚úÖ

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ:**
- ‚úÖ –£–¥–∞–ª—ë–Ω –∫–æ–¥ –≤—ã–∑–æ–≤–∞ `/api/translate`
- ‚úÖ –£–¥–∞–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø–µ—Ä–µ–≤–æ–¥–∞
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ `/api/ai-action` –ø–æ—Å–ª–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ (—Å—Ç—Ä–æ–∫–∏ 59-84)
- ‚úÖ –ü–µ—Ä–µ–¥–∞—ë—Ç—Å—è `actionType` –∏ `parsedData.content` –≤ API (—Å—Ç—Ä–æ–∫–∏ 70-72)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∞–Ω –æ—Ç–≤–µ—Ç –æ—Ç `/api/ai-action` (—Å—Ç—Ä–æ–∫–∏ 86-108)
- ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–≤–æ–¥–∏—Ç—Å—è –≤ –ø–æ–ª–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (—Å—Ç—Ä–æ–∫–∞ 110)

**–ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**

**–î–æ:**
```javascript
const translateResponse = await fetch('/api/translate', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ content: parsedData.content }),
})
const translateData = await translateResponse.json()
setResult(translateData.translation || '–ü–µ—Ä–µ–≤–æ–¥ –Ω–µ –ø–æ–ª—É—á–µ–Ω')
```

**–ü–æ—Å–ª–µ:**
```javascript
const aiResponse = await fetch('/api/ai-action', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ 
    actionType: actionType,  // '–û —á–µ–º —Å—Ç–∞—Ç—å—è?', '–¢–µ–∑–∏—Å—ã', '–ü–æ—Å—Ç –¥–ª—è Telegram'
    content: parsedData.content 
  }),
  signal: aiController.signal  // –¢–∞–π–º–∞—É—Ç –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑–∞–≤–∏—Å–∞–Ω–∏–π
})
const aiData = await aiResponse.json()
setResult(aiData.result)
```

---

## –®–∞–≥ 3.3: –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∑–∞–≥—Ä—É–∑–∫–∏ ‚úÖ

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- ‚úÖ `loading` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ `true` –ø–µ—Ä–µ–¥ –∑–∞–ø—Ä–æ—Å–æ–º (—Å—Ç—Ä–æ–∫–∞ 18)
- ‚úÖ `loading` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ `false` –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤ –±–ª–æ–∫–µ `finally` (—Å—Ç—Ä–æ–∫–∞ 116)
- ‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (—Å—Ç—Ä–æ–∫–∏ 175-178)
- ‚úÖ –ö–Ω–æ–ø–∫–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ (`disabled={loading}`)

**–õ–æ–≥–∏–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π:**
```javascript
setLoading(true)  // –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –æ–±—Ä–∞–±–æ—Ç–∫–∏
setResult('')     // –û—á–∏—Å—Ç–∫–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
try {
  // ... –∑–∞–ø—Ä–æ—Å—ã ...
} finally {
  setLoading(false)  // –í—Å–µ–≥–¥–∞ —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
}
```

**UI –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏:**
```javascript
{loading ? (
  <div className="flex items-center justify-center py-8">
    <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"></div>
  </div>
) : ...}
```

---

## –®–∞–≥ 3.4: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ ‚úÖ

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**

1. **Try-catch –±–ª–æ–∫ –¥–ª—è –≤—Å–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
   - ‚úÖ –û–±—ë—Ä–Ω—É—Ç –≤–µ—Å—å –∫–æ–¥ –≤ `try-catch-finally` (—Å—Ç—Ä–æ–∫–∏ 21-117)

2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞:**
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ `parseResponse.ok` (—Å—Ç—Ä–æ–∫–∞ 47)
   - ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ (—Å—Ç—Ä–æ–∫–∏ 48-49)
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (—Å—Ç—Ä–æ–∫–∏ 55-57)
   - ‚úÖ –¢–∞–π–º–∞—É—Ç –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π `AbortError` (—Å—Ç—Ä–æ–∫–∏ 23-44)

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ AI –∑–∞–ø—Ä–æ—Å–∞:**
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ `aiResponse.ok` (—Å—Ç—Ä–æ–∫–∞ 87)
   - ‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Å—Ç–∞—Ç—É—Å–æ–≤ –æ—à–∏–±–æ–∫:
     - `401` ‚Üí –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ API (—Å—Ç—Ä–æ–∫–∞ 92-93)
     - `429` ‚Üí –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤ (—Å—Ç—Ä–æ–∫–∞ 94-95)
     - `400` ‚Üí –ù–µ–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å (—Å—Ç—Ä–æ–∫–∞ 96-97)
   - ‚úÖ –¢–∞–π–º–∞—É—Ç –¥–ª—è AI –∑–∞–ø—Ä–æ—Å–∞ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π `AbortError` (—Å—Ç—Ä–æ–∫–∏ 60-84)

4. **–í—ã–≤–æ–¥ –ø–æ–Ω—è—Ç–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö:**
   - ‚úÖ –í—Å–µ –æ—à–∏–±–∫–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –ø–æ–ª–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (—Å—Ç—Ä–æ–∫–∞ 113)
   - ‚úÖ –§–æ—Ä–º–∞—Ç: `–û—à–∏–±–∫–∞: [–æ–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏]`

**–ü—Ä–∏–º–µ—Ä—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫:**
```javascript
// –¢–∞–π–º–∞—É—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞
if (error.name === 'AbortError') {
  throw new Error('–ü—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ —Å—Ç–∞—Ç—å–∏. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.')
}

// –û—à–∏–±–∫–∏ API
if (aiResponse.status === 401) {
  errorMessage = '–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ API. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ API –∫–ª—é—á–∞.'
} else if (aiResponse.status === 429) {
  errorMessage = '–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.'
}

// –û–±—â–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
catch (error) {
  setResult(`–û—à–∏–±–∫–∞: ${error.message}`)
}
```

---

## –®–∞–≥ 3.5: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –∫–Ω–æ–ø–æ–∫ ‚úÖ

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**

–í—Å–µ —Ç—Ä–∏ –∫–Ω–æ–ø–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏ –ø–µ—Ä–µ–¥–∞—é—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π `actionType`:

1. **–ö–Ω–æ–ø–∫–∞ "–û —á–µ–º —Å—Ç–∞—Ç—å—è?"** (—Å—Ç—Ä–æ–∫–∏ 148-154):
   ```javascript
   onClick={() => handleAction('–û —á–µ–º —Å—Ç–∞—Ç—å—è?')}
   ```
   - ‚úÖ –ü–µ—Ä–µ–¥–∞—ë—Ç `actionType: '–û —á–µ–º —Å—Ç–∞—Ç—å—è?'`
   - ‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ç–∞—Ç—å–∏ (2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)

2. **–ö–Ω–æ–ø–∫–∞ "–¢–µ–∑–∏—Å—ã"** (—Å—Ç—Ä–æ–∫–∏ 155-161):
   ```javascript
   onClick={() => handleAction('–¢–µ–∑–∏—Å—ã')}
   ```
   - ‚úÖ –ü–µ—Ä–µ–¥–∞—ë—Ç `actionType: '–¢–µ–∑–∏—Å—ã'`
   - ‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ç–µ–∑–∏—Å–æ–≤

3. **–ö–Ω–æ–ø–∫–∞ "–ü–æ—Å—Ç –¥–ª—è Telegram"** (—Å—Ç—Ä–æ–∫–∏ 162-168):
   ```javascript
   onClick={() => handleAction('–ü–æ—Å—Ç –¥–ª—è Telegram')}
   ```
   - ‚úÖ –ü–µ—Ä–µ–¥–∞—ë—Ç `actionType: '–ü–æ—Å—Ç –¥–ª—è Telegram'`
   - ‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Å—Ç —Å —ç–º–æ–¥–∑–∏ –∏ —Ö–µ—à—Ç–µ–≥–∞–º–∏

**–í—Å–µ –∫–Ω–æ–ø–∫–∏:**
- ‚úÖ –ë–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ (`disabled={loading}`)
- ‚úÖ –ò–º–µ—é—Ç –≤–∏–∑—É–∞–ª—å–Ω—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å (hover —ç—Ñ—Ñ–µ–∫—Ç—ã)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É—é—Ç —Ä–∞–∑–Ω—ã–µ —Ü–≤–µ—Ç–∞ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–ª–∏—á–∏—è

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è: –ó–∞—â–∏—Ç–∞ –æ—Ç –∑–∞–≤–∏—Å–∞–Ω–∏–π ‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –≠—Ç–∞–ø–∞ 3 –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–≤–∏—Å–ª–∞ –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Ç–∞–π–º–∞—É—Ç–æ–≤ –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –≤–Ω–µ—à–Ω–∏–º API.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–∞–π–º–∞—É—Ç—ã –¥–ª—è –≤—Å–µ—Ö –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤:

1. **–¢–∞–π–º–∞—É—Ç –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å—Ç–∞—Ç—å–∏:**
   - –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è: 30 —Å–µ–∫—É–Ω–¥
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `AbortController` –¥–ª—è –æ—Ç–º–µ–Ω—ã –∑–∞–ø—Ä–æ—Å–∞
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ `AbortError` —Å –ø–æ–Ω—è—Ç–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º

2. **–¢–∞–π–º–∞—É—Ç –¥–ª—è AI –∑–∞–ø—Ä–æ—Å–∞:**
   - –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è: 90 —Å–µ–∫—É–Ω–¥ (AI –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –¥–æ–ª—å—à–µ)
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `AbortController` –¥–ª—è –æ—Ç–º–µ–Ω—ã –∑–∞–ø—Ä–æ—Å–∞
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ `AbortError` —Å –ø–æ–Ω—è—Ç–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º

3. **–¢–∞–π–º–∞—É—Ç –Ω–∞ –±—ç–∫–µ–Ω–¥–µ (`app/api/ai-action/route.js`):**
   - –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è: 60 —Å–µ–∫—É–Ω–¥ –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ –∫ OpenRouter API
   - –í–æ–∑–≤—Ä–∞—Ç —Å—Ç–∞—Ç—É—Å–∞ 504 –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ç–∞–π–º–∞—É—Ç–æ–≤:**
```javascript
// –ü–∞—Ä—Å–∏–Ω–≥
const parseController = new AbortController()
const parseTimeoutId = setTimeout(() => parseController.abort(), 30000)
// ... fetch —Å signal: parseController.signal ...

// AI –∑–∞–ø—Ä–æ—Å
const aiController = new AbortController()
const aiTimeoutId = setTimeout(() => aiController.abort(), 90000)
// ... fetch —Å signal: aiController.signal ...
```

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π —Ñ–∞–π–ª
- **–§–∞–π–ª:** `app/page.js`
- **–°—Ç—Ä–æ–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π:** 10-118 (—Ñ—É–Ω–∫—Ü–∏—è `handleAction`)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ—É–Ω–∫—Ü–∏–∏ handleAction

```javascript
async function handleAction(actionType) {
  1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è URL
  2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ loading = true
  3. –ü–∞—Ä—Å–∏–Ω–≥ —Å—Ç–∞—Ç—å–∏ (/api/parse) —Å —Ç–∞–π–º–∞—É—Ç–æ–º 30 —Å–µ–∫
  4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞
  5. –û–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ AI (/api/ai-action) —Å —Ç–∞–π–º–∞—É—Ç–æ–º 90 —Å–µ–∫
  6. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ AI
  7. –í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
  8. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
  9. –°–±—Ä–æ—Å loading = false (–≤ finally)
}
```

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –ö–Ω–æ–ø–∫–∞ ‚Üí handleAction(actionType)
  ‚Üì
–ü–∞—Ä—Å–∏–Ω–≥ —Å—Ç–∞—Ç—å–∏ (/api/parse)
  ‚Üì
–û–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ AI (/api/ai-action)
  ‚Üì
  ‚îú‚îÄ actionType: '–û —á–µ–º —Å—Ç–∞—Ç—å—è?' ‚Üí –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
  ‚îú‚îÄ actionType: '–¢–µ–∑–∏—Å—ã' ‚Üí –°–ø–∏—Å–æ–∫ —Ç–µ–∑–∏—Å–æ–≤
  ‚îî‚îÄ actionType: '–ü–æ—Å—Ç –¥–ª—è Telegram' ‚Üí –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Å—Ç
  ‚Üì
–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
```

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

**–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
   ```powershell
   pnpm dev
   ```

2. –û—Ç–∫—Ä–æ–π—Ç–µ [http://localhost:3000](http://localhost:3000)

3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∫–∞–∂–¥—É—é –∫–Ω–æ–ø–∫—É:
   - –í–≤–µ–¥–∏—Ç–µ URL –∞–Ω–≥–ª–æ—è–∑—ã—á–Ω–æ–π —Å—Ç–∞—Ç—å–∏
   - –ù–∞–∂–º–∏—Ç–µ "–û —á–µ–º —Å—Ç–∞—Ç—å—è?" ‚Üí –¥–æ–ª–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
   - –ù–∞–∂–º–∏—Ç–µ "–¢–µ–∑–∏—Å—ã" ‚Üí –¥–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ç–µ–∑–∏—Å–æ–≤
   - –ù–∞–∂–º–∏—Ç–µ "–ü–æ—Å—Ç –¥–ª—è Telegram" ‚Üí –¥–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Å—Ç

4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫:
   - –ü—É—Å—Ç–æ–π URL ‚Üí —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
   - –ù–µ–≤–µ—Ä–Ω—ã–π URL ‚Üí –æ—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞
   - –¢–∞–π–º–∞—É—Ç ‚Üí —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ –æ–∂–∏–¥–∞–Ω–∏—è

---

## –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –≠—Ç–∞–ø—É 4

‚úÖ **Frontend –æ–±–Ω–æ–≤–ª—ë–Ω:**
- –§—É–Ω–∫—Ü–∏—è `handleAction` –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω–∞
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `/api/ai-action` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- –í—Å–µ —Ç—Ä–∏ –∫–Ω–æ–ø–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- –°–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã
- –ó–∞—â–∏—Ç–∞ –æ—Ç –∑–∞–≤–∏—Å–∞–Ω–∏–π –¥–æ–±–∞–≤–ª–µ–Ω–∞

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –≠—Ç–∞–ø 4 - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π

---

## –†–µ–∑—é–º–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —à–∞–≥–æ–≤

- ‚úÖ **–®–∞–≥ 3.1:** –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–π —Ñ—É–Ω–∫—Ü–∏–∏ handleAction
- ‚úÖ **–®–∞–≥ 3.2:** –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Ñ—É–Ω–∫—Ü–∏–∏ handleAction
- ‚úÖ **–®–∞–≥ 3.3:** –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ **–®–∞–≥ 3.4:** –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
- ‚úÖ **–®–∞–≥ 3.5:** –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –∫–Ω–æ–ø–æ–∫
- ‚úÖ **–ë–æ–Ω—É—Å:** –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–∞–π–º–∞—É—Ç—ã –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑–∞–≤–∏—Å–∞–Ω–∏–π

**–≠—Ç–∞–ø 3 –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤–µ—Ä—à—ë–Ω!** üéâ
